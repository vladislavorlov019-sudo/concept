@startuml C1_Context
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

' НАСТРОЙКИ ВИЗУАЛА
skinparam backgroundColor white
LAYOUT_WITH_LEGEND()
title Диаграмма контекста системы (C1): Единая система аналитической отчетности

' --- ПОЛЬЗОВАТЕЛИ (Люди) ---
Person(top_management, "Высшее руководство", "Оценка здоровья компании и принятие стратегических решений (долгосрочная перспектива).")
Person(rop, "Руководитель отдела продаж (РОП)", "Оперативное управление, тактическое планирование и контроль (краткосрочная и среднесрочная перспектива).")
Person(manager, "Менеджер по продажам", "Мониторинг личной эффективности, анализ поведения контрагентов и поиск потенциальных точек роста.")

' --- НАША СИСТЕМА (Центральный элемент) ---
System(reporting_system, "Единая система аналитической отчетности", "Агрегирует данные, проводит проверку качества и предоставляет инструменты для многоуровневого анализа бизнеса.")

' --- ВНЕШНИЕ СИСТЕМЫ (Окружение) ---
System_Ext(erp_1c, "1С:Предприятие (ERP)", "Учетная система: финансы, склад, себестоимость.")
System_Ext(crm, "Отраслевая CRM", "Данные о клиентах, сделках и истории взаимодействий.")
System_Ext(file_share, "Файловое хранилище", "Исторические планы продаж и бюджеты (Excel).")
System_Ext(mail_server, "Корпоративная почта", "Канал доставки уведомлений и алертов.")

' --- СВЯЗИ (Потоки данных) ---

' Входящие данные (Источники)
Rel(erp_1c, reporting_system, "Поставляет финансовые данные и остатки", "OData API")
Rel(crm, reporting_system, "Поставляет данные о клиентах и воронке", "REST API")
Rel(file_share, reporting_system, "Поставляет планы", "SMB/FTP")

' Взаимодействие с пользователями (Ценность)
Rel(top_management, reporting_system, "Контролирует P&L и макро-тренды", "Web Dashboard")
Rel(rop, reporting_system, "Анализирует план-факт и воронку продаж", "Web Dashboard")
Rel(manager, reporting_system, "Изучает клиентские инсайты и личный прогресс", "Web Dashboard")

' Технические уведомления
Rel(reporting_system, mail_server, "Отправляет отчеты и алерты качества", "SMTP")
Rel(mail_server, rop, "Уведомляет об ошибках в данных", "Email")

@enduml
