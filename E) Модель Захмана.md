# Раздел E: Архитектура предприятия (Модель Захмана)

## 1. Введение
Данный раздел систематизирует архитектурные артефакты проекта согласно онтологии Джона Захмана (Zachman Framework). Матрица обеспечивает целостное представление системы «Единая система аналитической отчетности» в шести измерениях (Что, Как, Где, Кто, Когда, Зачем) и на четырех основных уровнях абстракции.

---

## 2. Матрица Захмана

| Уровень / Аспект | **WHAT** (Данные) | **HOW** (Функция) | **WHERE** (Сеть) | **WHO** (Люди) | **WHEN** (Время) | **WHY** (Мотивация) |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **1. Контекст**<br>*(Планировщик / CEO)* | Список бизнес-сущностей:<br>- Заказы<br>- Клиенты<br>- Товары<br>- Планы | Основной бизнес-процесс:<br>Управление продажами и производством | Локации бизнеса:<br>- Офис<br>- Склад<br>- Производство<br>- Удаленка | Список стейкхолдеров:<br>- Ген. директор<br>- РОП<br>- Менеджеры | Бизнес-циклы:<br>- Финансовый год<br>- Квартал<br>- Месяц | Стратегические цели:<br>- Рост прибыли<br>- Прозрачность<br>- Data-Driven культура |
| **2. Концепция**<br>*(Владелец / Бизнес)* | Семантическая модель:<br>- Связь "Клиент-Заказ"<br>- Атрибуты (Цена, Кол-во)<br>- Справочники (НСИ) | Функциональные требования:<br>- Сбор данных<br>- Валидация<br>- Расчет KPI<br>- Визуализация | Точки интеграции:<br>- 1C (ERP)<br>- CRM<br>- Excel-файлы<br>- Почта | Ролевая модель:<br>- Стратег (View All)<br>- Операционист (Region)<br>- Исполнитель (Self) | Регламент отчетности:<br>- Ежедневный срез<br>- План-факт (Real-time) | Бизнес-требования:<br>- Сокращение трудозатрат<br>- Исключение ошибок<br>- Импортозамещение |
| **3. Логика**<br>*(Архитектор)* | Логическая модель данных:<br>- Схема «Звезда»<br>- Факты и Измерения<br>- Витрины данных | Архитектура приложений:<br>- ETL (Pipeline)<br>- DWH (Storage)<br>- BI (Interface) | Распределенная система:<br>- Контур On-Premise<br>- Облачный контур (SaaS) | Политики доступа:<br>- RBAC (Role-Based)<br>- RLS (Row-Level Security) | Расписание событий:<br>- Trigger: File Event<br>- Cron: Every 15 min | Архитектурные принципы:<br>- ELT-подход<br>- Data Quality Firewall<br>- Микросервисы |
| **4. Физика**<br>*(Инженер)* | Физическая схема БД:<br>- ClickHouse Tables<br>- Types (Decimal, UInt64)<br>- Materialized Views | Спецификации компонентов:<br>- n8n Workflows (JS)<br>- SQL Scripts<br>- Docker Containers | Протоколы и Адреса:<br>- TCP/IP, HTTP/S<br>- Port 8123, 5678<br>- Private Network | Учетные записи:<br>- Service Accounts<br>- Yandex ID<br>- Admin/User | Настройки таймингов:<br>- Timeout: 30s<br>- Retry: 3 attempts<br>- TTL: 90 days | Технические стандарты:<br>- Open Source<br>- Low Code<br>- ГОСТ Р 59853 |

---

## 3. Детальное описание колонок (Аспектов)

### 3.1. Данные (What)
Колонка описывает трансформацию информации от абстрактных понятий до байтов на диске.
* **Артефакты:** C3 (Диаграмма компонентов ClickHouse), C4 (ER-диаграмма).
* **Ключевое решение:** Использование колоночной СУБД и схемы «Звезда» для оптимизации аналитических запросов.

### 3.2. Функция (How)
Колонка описывает трансформацию процессов от бизнес-задач до программного кода.
* **Артефакты:** B1 (Концепт ETL), C3 (Диаграмма компонентов n8n), C4 (Activity Diagram).
* **Ключевое решение:** Внедрение автоматизированного конвейера с блоком контроля качества (Data Quality) для замены ручного труда.

### 3.3. Сеть (Where)
Колонка описывает топологию и связи.
* **Артефакты:** C2 (Контейнерная диаграмма).
* **Ключевое решение:** Гибридная архитектура. Чувствительные данные обрабатываются во внутреннем контуре (Docker), обезличенные агрегаты визуализируются в облаке (Yandex DataLens).

### 3.4. Люди (Who)
Колонка описывает участников и их права.
* **Артефакты:** C1 (Контекст), D1 (Клиентские пути).
* **Ключевое решение:** Реализация RLS (Row Level Security). Один дашборд адаптируется под роль пользователя, скрывая лишнюю информацию.

### 3.5. Время (When)
Колонка описывает временные характеристики и события.
* **Артефакты:** B1 (Описание триггеров).
* **Ключевое решение:** Переход от Batch-обработки (раз в месяц) к Near Real-Time (по событию или каждые 15 минут), что повышает скорость реакции бизнеса.

### 3.6. Мотивация (Why)
Колонка описывает цели и ограничения.
* **Артефакты:** A1 (Эссе), B2 (Экономика и ГосТех).
* **Ключевое решение:** Соответствие стратегии импортозамещения и экономическая эффективность (ROI 2-3 месяца).
